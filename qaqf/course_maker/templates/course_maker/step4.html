<!-- course_maker/step4.html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Creation Wizard:QCG</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KE6tbwr25q5Fv7uME6BU6h2HhtXb1wFTnxJVZb8VSKq0kTgyXXpVqvBgKjeWCqH3" crossorigin="anonymous">
</head>
<body>
    <div class="container mt-5">
        <h2>Step 4: Generated Course Content</h2>

        <div class="content-listing">
            {% content_listing.modules %}
            {% if content_listing.modules %}
                {% for module in content_listing.modules %}
                    <div class="module">
                        <h3>{{ module.module_name }}</h3>
                        {% if module.items %}
                            <ul>
                                {% for item in module.items %}
                                    <li>
                                        <strong>{{ item.item_name }}</strong> (Type: {{ item.type }})
                                        {% if item.sub_items %}
                                            <ul>
                                                {% for sub_item in item.sub_items %}
                                                    <li>{{ sub_item }}</li>
                                                {% endfor %}
                                            </ul>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>No items found in this module.</p>
                        {% endif %}
                    </div>
                {% endfor %}
            {% else %}
                <p>No modules found.</p>
            {% endif %}
        </div>

        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="id_content_listing">Edit Content Listing:</label>
                <textarea id="id_content_listing" name="content_listing" rows="15" class="form-control">{{ content_listing|json_script:"content_listing_json" }}</textarea>
                <small class="form-text text-muted">Edit the content listing if needed before proceeding.</small>
            </div>

            <div class="form-navigation">
                <button type="submit" name="wizard_goto_step" value="step3" class="btn btn-secondary">Previous</button>
                <button type="submit" class="btn btn-primary">Next</button>
            </div>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2zNkS7hVDPHJo6mgkJmV6EZG8rryUCu1pM5rV3cjjIUqfRxXPG5QK7tmYp" crossorigin="anonymous"></script>
</body>
</html>
